<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIGAgames.com</title>
    <style>
        body {
            margin: 0; /* –£–±–∏—Ä–∞–µ—Ç –æ—Ç—Å—Ç—É–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –±—ã–ª –≤—ã—à–µ */
            padding-left: 170px;  /* –î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –¥–ª—è –±–∞–Ω–Ω–µ—Ä–∞ */
            padding-right: 170px; /* –î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç—Å—Ç—É–ø —Å–ø—Ä–∞–≤–∞ –¥–ª—è –±–∞–Ω–Ω–µ—Ä–∞ */
        }
        #main-content {
            /* –≠—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç –¥–æ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É */
            display: none;
        }
        #auth-container {
            position: absolute;
            top: 10px;
            right: 10px;
            text-align: right;
        }
        #auth-container button {
            margin-left: 5px;
        }
        .button-container {
            text-align: center;
            margin-top: 100px; /* –û—Ç–æ–¥–≤–∏–≥–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑ */
        }
        .button-container button {
            animation: float 12s ease-in-out infinite;
        }
        .button-container button:nth-child(1) {
            animation-delay: 0s;
        }
        .button-container button:nth-child(2) {
            animation-delay: -4s;
        }
        .button-container button:nth-child(3) {
            animation-delay: -8s;
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            margin: 8px;
            cursor: pointer;
            border: 2px solid black; /* –î–æ–±–∞–≤–ª–µ–Ω–∞ –∂–∏—Ä–Ω–∞—è —á–µ—Ä–Ω–∞—è —Ä–∞–º–∫–∞ */
        }
        .game-menu {
            display: none; /* Hidden by default. */
            margin-top: 20px;
            padding: 20px 40px; /* Reduced vertical padding */
            border: 1px solid #ccc;
            text-align: center;
            position: relative; /* Needed for absolute positioning of child elements */
            width: 50%; /* Set a width */
            margin-left: auto; /* Center the block */
            margin-right: auto; /* Center the block */
        }

        .back-button {
            position: absolute;
            top: 10px; /* Adjust as needed for padding */
            left: 10px; /* Adjust as needed for padding */
            background: none; /* Make it look less like a standard button */
            border: none;
            font-size: 24px; /* Make the arrow prominent */
            cursor: pointer;
            padding: 0; /* Remove default button padding */
            margin: 0; /* Remove default button margin */
        }
        .game-menu p {
            font-size: 22px; /* –£–≤–µ–ª–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ "BOT" –∏ "PLAYER" */
            font-weight: bold;
            margin-top: 0; /* –ü—Ä–∏–±–ª–∏–∂–∞–µ—Ç "BOT" –∫ –≤–µ—Ä—Ö—É */
            margin-bottom: 15px; /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }
        .game-menu button {
            /* –≠—Ç–∏ —Å—Ç–∏–ª–∏ –Ω–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫ –∫–Ω–æ–ø–∫–µ "–Ω–∞–∑–∞–¥" –∏–∑-–∑–∞ –µ—ë –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ .back-button */
            padding: 10px 20px; /* –£–º–µ–Ω—å—à–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
            font-size: 16px; /* –£–º–µ–Ω—å—à–µ–Ω —à—Ä–∏—Ñ—Ç –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö */
        }
        #result-container {
            height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #dice-icon {
            font-size: 100px; /* –°–¥–µ–ª–∞–µ–º –∫–æ—Å—Ç—å –∫—Ä—É–ø–Ω–µ–µ */
            margin: 20px 0;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3); /* –î–æ–±–∞–≤–∏–º —Ç–µ–Ω—å –¥–ª—è –æ–±—ä–µ–º–∞ */
            transform: rotate(-8deg); /* –ù–µ–º–Ω–æ–≥–æ –Ω–∞–∫–ª–æ–Ω–∏–º */
            color: #333; /* –°–¥–µ–ª–∞–µ–º —Ü–≤–µ—Ç —á—É—Ç—å –º—è–≥—á–µ */
        }
        #dice-icon-container {
            height: 140px; /* –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spinning {
            animation: spin 0.4s linear infinite; /* –£–≤–µ–ª–∏—á–µ–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è */
            text-shadow: none; /* –£–±–∏—Ä–∞–µ–º —Ç–µ–Ω—å –≤–æ –≤—Ä–µ–º—è –≤—Ä–∞—â–µ–Ω–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ */
        }

        #emoji-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            overflow: hidden;
        }

        #emoji-background span {
            position: absolute;
            user-select: none; /* –ó–∞–ø—Ä–µ—â–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–º–∞–π–ª–∏–∫–æ–≤ */
            animation: float 10s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); } /* –ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ */
            25% { transform: translateY(-5px) rotate(-5deg); } /* –ß—É—Ç—å –≤–≤–µ—Ä—Ö –∏ –≤–ª–µ–≤–æ */
            50% { transform: translateY(-10px) rotate(0deg); } /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–≤–µ—Ä—Ö, –±–µ–∑ –Ω–∞–∫–ª–æ–Ω–∞ */
            75% { transform: translateY(-5px) rotate(5deg); } /* –ß—É—Ç—å –≤–≤–µ—Ä—Ö –∏ –≤–ø—Ä–∞–≤–æ */
            100% { transform: translateY(0px) rotate(0deg); } /* –í–æ–∑–≤—Ä–∞—Ç –≤ –Ω–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ */
        }

        #welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        .auth-form-container {
            background-color: #333;
            padding: 30px;
            border-radius: 10px;
            width: 350px;
            text-align: center;
        }
        .auth-form-container input {
            width: 90%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #555;
        }
        .auth-switch-link {
            color: #00aaff;
            cursor: pointer;
            font-size: 14px;
            margin-top: 15px;
            display: inline-block;
        }
        .auth-form-container button {
            border: 2px solid black; /* –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª—å —Ä–∞–º–∫–∏ –∫ –∫–Ω–æ–ø–∫–∞–º –≤ —Ñ–æ—Ä–º–µ */
            background-color: #007bff; /* Default blue background */
            color: white; /* White text for contrast */
            padding: 10px 20px; /* Make them a bit larger */
            border-radius: 5px;
            cursor: pointer;
            width: 90%; /* Match input width */
            margin-top: 15px; /* Add some space above */
        }

        .ad-banner {
            position: fixed;
            top: 0;
            bottom: 0;
            width: 160px; /* –®–∏—Ä–∏–Ω–∞ –±–∞–Ω–Ω–µ—Ä–∞ */
            background-color: #f1f1f1;
            border: 1px solid #dcdcdc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #555;
            z-index: 500; /* –ù–∏–∂–µ —á–µ–º –º–µ–Ω—é, –Ω–æ –≤—ã—à–µ —Ñ–æ–Ω–∞ */
        }
        #left-ad-banner {
            left: 0;
        }
        #right-ad-banner {
            right: 0;
        }
    </style>
</head>
<body>
    <div id="left-ad-banner" class="ad-banner">Your Ad Here</div>
    <div id="right-ad-banner" class="ad-banner">Your Ad Here</div>
    <div id="emoji-background"></div>
    <div id="main-content">
        <div id="auth-container"></div>
        <h1 id="main-title" style="font-size: 12em; color: crimson; text-align: center; margin-bottom: 20px; margin-top: 0;">MIGAgames</h1>
        <p style="text-align: center;"><span id="total-wins-display" style="font-size: 3.6em; color: #007bff;">Total Wins: 0</span></p>

             <div class="button-container">
                <button id="rps-button"></button>
                <button id="gtn-button"></button>
                <button id="donate-button"></button>
                <button id="settings-button"></button>
             </div>
    </div>

         <!-- This is the menu that will appear -->
         <div id="rps-menu" class="game-menu">
            <button id="rps-back-button" class="back-button">&larr;</button>
            <p id="bot-label"></p>
            <div id="result-container">
                <p id="bot-choice-text" style="font-size: 20px; margin: 5px;">Choice: ?</p>
                <h2 id="result-text" style="font-size: 48px; margin: 10px;"></h2>
            </div>
            <button id="rock-btn"></button>
            <button id="paper-btn"></button>
            <button id="scissors-btn"></button>
            <p id="player-label" style="margin-top: 25px; margin-bottom: 0;"></p>
         </div>

         <!-- Guess the number menu -->
         <div id="gtn-menu" class="game-menu">
            <button id="gtn-back-button" class="back-button">&larr;</button>
            <h2 id="gtn-title"></h2>
            <div id="dice-icon-container">
                <p id="dice-icon">‚öÉ</p>
            </div>
            <h2 id="gtn-result-text" style="font-size: 48px; margin: 10px;"></h2>
            <div id="gtn-choices">
                <!-- –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
            <button id="play-again-btn" style="display: none;"></button>
         </div>

         <!-- Settings menu -->
         <div id="settings-menu" class="game-menu">
            <button id="settings-back-button" class="back-button">&larr;</button>
            <div id="settings-main-content">
                <h2 id="settings-title"></h2>
                <button id="language-menu-btn" style="margin-top: 20px;"></button>
                <button id="theme-menu-btn" style="margin-top: 20px;"></button>
                <button id="button-color-menu-btn" style="margin-top: 20px;"></button>
            </div>
            <div id="language-submenu" style="display: none;">
                <button id="language-submenu-back-btn" class="back-button">&larr;</button>
                <h2 id="language-menu-title"></h2>
                <!-- Language buttons will be added here via JS -->
            </div>
            <div id="theme-submenu" style="display: none;">
                <button id="theme-submenu-back-btn" class="back-button">&larr;</button>
                <h2 id="theme-menu-title"></h2>
                <div id="theme-buttons-container" style="margin-top: 15px;"></div>
                <!-- Language buttons will be added here via JS -->
            </div>
            <div id="button-color-submenu" style="display: none;">
                <button id="button-color-submenu-back-btn" class="back-button">&larr;</button>
                <h2 id="button-color-menu-title"></h2>
                <div id="button-color-buttons-container" style="margin-top: 15px;"></div>
            </div>
         </div>

        <!-- Welcome/Auth Overlay -->
        <div id="welcome-overlay">
            <div class="auth-form-container">
                <!-- This container will be filled by JavaScript -->
            </div>
        </div>

    <!-- HTML Templates for Auth Forms -->
    <template id="welcome-register-form-template">
        <div id="welcome-register-form">
            <h2 id="welcome-register-title"></h2>
            <input type="text" id="welcome-register-username" placeholder="Username">
            <input type="email" id="welcome-register-email" placeholder="Email">
            <input type="password" id="welcome-register-password" placeholder="Password">
            <button id="welcome-register-submit"></button>
            <p id="welcome-register-error" style="color: red; font-size: 14px;"></p>
            <span id="switch-to-login" class="auth-switch-link"></span>
        </div>
    </template>
    <template id="welcome-login-form-template">
        <div id="welcome-login-form">
            <h2 id="welcome-login-title"></h2>
            <input type="text" id="welcome-login-username" placeholder="Username">
            <input type="password" id="welcome-login-password" placeholder="Password">
            <button id="welcome-login-submit"></button>
            <p id="welcome-login-error" style="color: red; font-size: 14px;"></p>
            <span id="switch-to-register" class="auth-switch-link"></span>
        </div>
    </template>

    <!-- Donate Menu -->
    <div id="donate-menu" class="game-menu">
        <!-- Amount Selection View -->
        <div id="donate-amount-selection">
            <button id="donate-back-btn" class="back-button">&larr;</button>
            <h2 id="donate-title"></h2>
            <p id="donate-description" style="font-size: 16px; font-weight: normal;"></p>
            <div id="donate-options" style="margin-top: 20px;">
                <button class="donate-option-btn" data-amount="$0.50">$0.50</button>
                <button class="donate-option-btn" data-amount="‚Ç¨1 / $1">‚Ç¨1 / $1</button>
                <button class="donate-option-btn" data-amount="‚Ç¨3 / $3">‚Ç¨3 / $3</button>
            </div>
        </div>
        <!-- Payment Method Selection View (hidden by default) -->
        <div id="donate-payment-selection" style="display: none;">
            <button id="donate-payment-back-btn" class="back-button">&larr;</button>
            <h2 id="donate-payment-title"></h2>
            <button id="apple-pay-btn" style="background-color: black; color: white; margin-top: 25px; padding: 15px; width: 90%; border-radius: 10px;"></button>
            <button id="card-pay-btn" style="background-color: #007bff; color: white; margin-top: 15px; padding: 15px; width: 90%; border-radius: 10px;"></button>
            <p id="payment-info" style="font-size: 12px; font-weight: normal; margin-top: 15px;"></p>
        </div>
    </div>

    <script>
        // Get the button and the menu elements
        const rpsButton = document.getElementById('rps-button');
        const rpsMenu = document.getElementById('rps-menu');
        const rpsBackButton = document.getElementById('rps-back-button');

        const gtnButton = document.getElementById('gtn-button');
        const gtnMenu = document.getElementById('gtn-menu');
        const gtnBackButton = document.getElementById('gtn-back-button');

        const settingsButton = document.getElementById('settings-button');
        const settingsMenu = document.getElementById('settings-menu');
        const settingsBackButton = document.getElementById('settings-back-button');



        // Game elements
        const rockBtn = document.getElementById('rock-btn');
        const paperBtn = document.getElementById('paper-btn');
        const scissorsBtn = document.getElementById('scissors-btn');
        const botChoiceText = document.getElementById('bot-choice-text');
        const resultText = document.getElementById('result-text');
        const botLabel = document.getElementById('bot-label');
        const playerLabel = document.getElementById('player-label');

        // Guess The Number game elements
        const diceIcon = document.getElementById('dice-icon');
        const gtnResultText = document.getElementById('gtn-result-text');
        const gtnChoicesContainer = document.getElementById('gtn-choices');
        const playAgainBtn = document.getElementById('play-again-btn');
        const diceFaces = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ']; // 1 to 6
        let diceSpinInterval = null; // –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Å–º–µ–Ω—ã —Ü–∏—Ñ—Ä
        const gtnTitle = document.getElementById('gtn-title');

        // Settings elements
        const settingsTitle = document.getElementById('settings-title');
        const languageMenuBtn = document.getElementById('language-menu-btn');
        const languageSubmenu = document.getElementById('language-submenu');
        const settingsMainContent = document.getElementById('settings-main-content');
        const languageSubmenuBackBtn = document.getElementById('language-submenu-back-btn');
        const languageMenuTitle = document.getElementById('language-menu-title');
        const themeMenuBtn = document.getElementById('theme-menu-btn');
        const themeSubmenu = document.getElementById('theme-submenu');
        const themeSubmenuBackBtn = document.getElementById('theme-submenu-back-btn');
        const themeMenuTitle = document.getElementById('theme-menu-title');
        const buttonColorMenuBtn = document.getElementById('button-color-menu-btn');
        const buttonColorSubmenu = document.getElementById('button-color-submenu');
        const buttonColorSubmenuBackBtn = document.getElementById('button-color-submenu-back-btn');
        const buttonColorMenuTitle = document.getElementById('button-color-menu-title');
        const donateButton = document.getElementById('donate-button');
        const donateMenu = document.getElementById('donate-menu');
        const donateBackBtn = document.getElementById('donate-back-btn');
        const donateAmountSelection = document.getElementById('donate-amount-selection');
        const donatePaymentSelection = document.getElementById('donate-payment-selection');
        const donatePaymentBackBtn = document.getElementById('donate-payment-back-btn');


        const authContainer = document.getElementById('auth-container');

        // Auth elements will be created dynamically or found when menus are open

        let totalWins = 0; // –û–±—â–∏–π —Å—á–µ—Ç—á–∏–∫ –ø–æ–±–µ–¥
        let currentLanguage = 'en'; // –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

        const translations = {
            en: {
                mainTitle: "MIGAgames",
                totalWinsPrefix: "Total Wins:",
                rpsButton: "Rock, Paper, Scissors",
                gtnButton: "Guess the number",
                settingsButton: "Settings",
                botLabel: "BOT ü§ñ",
                playerLabel: "PLAYER üßë",
                choicePrefix: "Choice:",
                win: "WIN!",
                lose: "LOSE!",
                draw: "DRAW!",
                rock: "Rock",
                paper: "Paper",
                scissors: "Scissors",
                gtnTitle: "Guess the Number",
                playAgain: "Play again",
                settingsTitle: "Settings",
                languageButton: "Language",
                languageMenuTitle: "Select Language",
                themeButton: "Theme",
                themeMenuTitle: "Select Theme",
                buttonColorButton: "Button Color",
                buttonColorMenuTitle: "Select Button Color",
                login: "Login",
                register: "Continue",
                logout: "Logout",
                welcome: "Welcome",
                usernamePlaceholder: "Username",
                passwordPlaceholder: "Password",
                loginError: "Invalid username or password.",
                registerError: "Username already taken.",
                registerSuccess: "Registration successful! Please log in.",
                emailPlaceholder: "Email",
                switchToLogin: "Already have an account? Login",
                switchToRegister: "Don't have an account? Register",
                allFieldsRequired: "All fields are required.",
                donateButton: "Donate",
                donateTitle: "Support the Project",
                donateDescription: "Your support helps keep the games running. Thank you!",
                donatePaymentTitle: "Choose payment method",
                applePay: "Pay with Apple Pay",
                cardPay: "Pay with Bank Card",
                paymentInfo: "This is a demo. No real payment will be processed.",
            },
            ru: {
                mainTitle: "MIGAgames",
                totalWinsPrefix: "–í—Å–µ–≥–æ –ø–æ–±–µ–¥:",
                rpsButton: "–ö–∞–º–µ–Ω—å, –ù–æ–∂–Ω–∏—Ü—ã, –ë—É–º–∞–≥–∞",
                gtnButton: "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ",
                settingsButton: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                botLabel: "–ë–û–¢ ü§ñ",
                playerLabel: "–ò–ì–†–û–ö üßë",
                choicePrefix: "–í—ã–±–æ—Ä:",
                win: "–ü–û–ë–ï–î–ê!",
                lose: "–ü–†–û–ò–ì–†–´–®!",
                draw: "–ù–ò–ß–¨–Ø!",
                rock: "–ö–∞–º–µ–Ω—å",
                paper: "–ë—É–º–∞–≥–∞",
                scissors: "–ù–æ–∂–Ω–∏—Ü—ã",
                gtnTitle: "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ",
                playAgain: "–°—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞",
                settingsTitle: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                languageButton: "–Ø–∑—ã–∫",
                languageMenuTitle: "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫",
                themeButton: "–¢–µ–º–∞",
                themeMenuTitle: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É",
                buttonColorButton: "–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫",
                buttonColorMenuTitle: "–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –∫–Ω–æ–ø–æ–∫",
                login: "–í–æ–π—Ç–∏",
                register: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",
                logout: "–í—ã–π—Ç–∏",
                welcome: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å",
                usernamePlaceholder: "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                passwordPlaceholder: "–ü–∞—Ä–æ–ª—å",
                loginError: "–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å.",
                registerError: "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –∑–∞–Ω—è—Ç–æ.",
                registerSuccess: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ.",
                emailPlaceholder: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞",
                switchToLogin: "–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏",
                switchToRegister: "–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è",
                allFieldsRequired: "–í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.",
                donateButton: "–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å",
                donateTitle: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç",
                donateDescription: "–í–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç –∏–≥—Ä–∞–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è. –°–ø–∞—Å–∏–±–æ!",
                donatePaymentTitle: "–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã",
                applePay: "–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Apple Pay",
                cardPay: "–û–ø–ª–∞—Ç–∏—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π",
                paymentInfo: "–≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è. –†–µ–∞–ª—å–Ω—ã–π –ø–ª–∞—Ç—ë–∂ –Ω–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω.",
            },
            es: { // Spanish
                mainTitle: "MIGAgames",
                totalWinsPrefix: "Victorias totales:",
                rpsButton: "Piedra, Papel, Tijeras",
                gtnButton: "Adivina el n√∫mero",
                settingsButton: "Ajustes",
                botLabel: "BOT ü§ñ",
                playerLabel: "JUGADOR üßë",
                choicePrefix: "Elecci√≥n:",
                win: "¬°GANASTE!",
                lose: "¬°PERDISTE!",
                draw: "¬°EMPATE!",
                rock: "Piedra",
                paper: "Papel",
                scissors: "Tijeras",
                gtnTitle: "Adivina el n√∫mero",
                playAgain: "Jugar de nuevo",
                settingsTitle: "Ajustes",
                languageButton: "Idioma",
                languageMenuTitle: "Seleccionar idioma",
                themeButton: "Tema",
                themeMenuTitle: "Seleccionar tema",
                buttonColorButton: "Color del bot√≥n",
                buttonColorMenuTitle: "Seleccionar color del bot√≥n",
                login: "Iniciar sesi√≥n",
                register: "Continuar",
                logout: "Cerrar sesi√≥n",
                welcome: "Bienvenido",
                usernamePlaceholder: "Nombre de usuario",
                passwordPlaceholder: "Contrase√±a",
                loginError: "Nombre de usuario o contrase√±a no v√°lidos.",
                registerError: "El nombre de usuario ya existe.",
                registerSuccess: "¬°Registro exitoso! Por favor, inicie sesi√≥n.",
                emailPlaceholder: "Correo electr√≥nico",
                switchToLogin: "¬øYa tienes una cuenta? Iniciar sesi√≥n",
                switchToRegister: "¬øNo tienes una cuenta? Registrarse",
                allFieldsRequired: "Todos los campos son obligatorios.",
                donateButton: "Donar",
                donateTitle: "Apoyar el proyecto",
                donateDescription: "Tu apoyo ayuda a mantener los juegos en funcionamiento. ¬°Gracias!",
                donatePaymentTitle: "Elige m√©todo de pago",
                applePay: "Pagar con Apple Pay",
                cardPay: "Pagar con tarjeta bancaria",
                paymentInfo: "Esto es una demostraci√≥n. No se procesar√° ning√∫n pago real.",
            },
            de: { // German
                mainTitle: "MIGAgames",
                totalWinsPrefix: "Gesamtsiege:",
                rpsButton: "Schere, Stein, Papier",
                gtnButton: "Errate die Zahl",
                settingsButton: "Einstellungen",
                botLabel: "BOT ü§ñ",
                playerLabel: "SPIELER üßë",
                choicePrefix: "Wahl:",
                win: "GEWONNEN!",
                lose: "VERLOREN!",
                draw: "UNENTSCHIEDEN!",
                rock: "Stein",
                paper: "Papier",
                scissors: "Schere",
                gtnTitle: "Errate die Zahl",
                playAgain: "Nochmal spielen",
                settingsTitle: "Einstellungen",
                languageButton: "Sprache",
                languageMenuTitle: "Sprache ausw√§hlen",
                themeButton: "Thema",
                themeMenuTitle: "Thema ausw√§hlen",
                buttonColorButton: "Knopffarbe",
                buttonColorMenuTitle: "Knopffarbe ausw√§hlen",
                login: "Anmelden",
                register: "Weiter",
                logout: "Abmelden",
                welcome: "Willkommen",
                usernamePlaceholder: "Benutzername",
                passwordPlaceholder: "Passwort",
                loginError: "Ung√ºltiger Benutzername oder Passwort.",
                registerError: "Benutzername bereits vergeben.",
                registerSuccess: "Registrierung erfolgreich! Bitte melden Sie sich an.",
                emailPlaceholder: "Email",
                switchToLogin: "Hast du schon ein Konto? Anmelden",
                switchToRegister: "Kein Konto? Registrieren",
                allFieldsRequired: "Alle Felder sind erforderlich.",
                donateButton: "Spenden",
                donateTitle: "Projekt unterst√ºtzen",
                donateDescription: "Deine Unterst√ºtzung hilft, die Spiele am Laufen zu halten. Danke!",
                donatePaymentTitle: "Zahlungsmethode w√§hlen",
                applePay: "Mit Apple Pay bezahlen",
                cardPay: "Mit Bankkarte bezahlen",
                paymentInfo: "Dies ist eine Demo. Es wird keine echte Zahlung verarbeitet.",
            },
            fi: { // Finnish
                mainTitle: "MIGAgames",
                totalWinsPrefix: "Voitot yhteens√§:",
                rpsButton: "Kivi, Paperi, Sakset",
                gtnButton: "Arvaa numero",
                settingsButton: "Asetukset",
                botLabel: "BOTTI ü§ñ",
                playerLabel: "PELAAJA üßë",
                choicePrefix: "Valinta:",
                win: "VOITIT!",
                lose: "H√ÑVISIT!",
                draw: "TASAPELI!",
                rock: "Kivi",
                paper: "Paperi",
                scissors: "Sakset",
                gtnTitle: "Arvaa numero",
                playAgain: "Pelaa uudelleen",
                settingsTitle: "Asetukset",
                languageButton: "Kieli",
                languageMenuTitle: "Valitse kieli",
                themeButton: "Teema",
                themeMenuTitle: "Valitse teema",
                buttonColorButton: "Painikkeen v√§ri",
                buttonColorMenuTitle: "Valitse painikkeen v√§ri",
                login: "Kirjaudu sis√§√§n",
                register: "Jatka",
                logout: "Kirjaudu ulos",
                welcome: "Tervetuloa",
                usernamePlaceholder: "K√§ytt√§j√§tunnus",
                passwordPlaceholder: "Salasana",
                loginError: "Virheellinen k√§ytt√§j√§tunnus tai salasana.",
                registerError: "K√§ytt√§j√§tunnus on jo varattu.",
                registerSuccess: "Rekister√∂inti onnistui! Kirjaudu sis√§√§n.",
                emailPlaceholder: "S√§hk√∂posti",
                switchToLogin: "Onko sinulla jo tili? Kirjaudu sis√§√§n",
                switchToRegister: "Eik√∂ sinulla ole tili√§? Rekister√∂idy",
                allFieldsRequired: "Kaikki kent√§t ovat pakollisia.",
                donateButton: "Lahjoita",
                donateTitle: "Tue projektia",
                donateDescription: "Tukesi auttaa pit√§m√§√§n pelit k√§ynniss√§. Kiitos!",
                donatePaymentTitle: "Valitse maksutapa",
                applePay: "Maksa Apple Paylla",
                cardPay: "Maksa pankkikortilla",
                paymentInfo: "T√§m√§ on demo. Oikeaa maksua ei k√§sitell√§.",
            },
            zh: { // Chinese
                mainTitle: "MIGAgames",
                totalWinsPrefix: "ÊÄªËÉúÂà©:",
                rpsButton: "Áü≥Â§¥,Ââ™ÂàÄ,Â∏É",
                gtnButton: "ÁåúÊï∞Â≠ó",
                settingsButton: "ËÆæÁΩÆ",
                botLabel: "Êú∫Âô®‰∫∫ ü§ñ",
                playerLabel: "Áé©ÂÆ∂ üßë",
                choicePrefix: "ÈÄâÊã©:",
                win: "ËÉúÂà©!",
                lose: "Â§±Ë¥•!",
                draw: "Âπ≥Â±Ä!",
                rock: "Áü≥Â§¥",
                paper: "Â∏É",
                scissors: "Ââ™ÂàÄ",
                gtnTitle: "ÁåúÊï∞Â≠ó",
                playAgain: "ÂÜçÁé©‰∏ÄÊ¨°",
                settingsTitle: "ËÆæÁΩÆ",
                languageButton: "ËØ≠Ë®Ä",
                languageMenuTitle: "ÈÄâÊã©ËØ≠Ë®Ä",
                themeButton: "‰∏ªÈ¢ò",
                themeMenuTitle: "ÈÄâÊã©‰∏ªÈ¢ò",
                buttonColorButton: "ÊåâÈíÆÈ¢úËâ≤",
                buttonColorMenuTitle: "ÈÄâÊã©ÊåâÈíÆÈ¢úËâ≤",
                login: "ÁôªÂΩï",
                register: "ÁªßÁª≠",
                logout: "ÁôªÂá∫",
                welcome: "Ê¨¢Ëøé",
                usernamePlaceholder: "Áî®Êà∑Âêç",
                passwordPlaceholder: "ÂØÜÁ†Å",
                loginError: "Êó†ÊïàÁöÑÁî®Êà∑ÂêçÊàñÂØÜÁ†Å„ÄÇ",
                registerError: "Áî®Êà∑ÂêçÂ∑≤Ë¢´Âç†Áî®„ÄÇ",
                registerSuccess: "Ê≥®ÂÜåÊàêÂäüÔºÅËØ∑ÁôªÂΩï„ÄÇ",
                emailPlaceholder: "ÁîµÂ≠êÈÇÆ‰ª∂",
                switchToLogin: "Â∑≤ÊúâË¥¶Êà∑ÔºüÁôªÂΩï",
                switchToRegister: "Ê≤°ÊúâË¥¶Êà∑ÔºüÊ≥®ÂÜå",
                allFieldsRequired: "ÊâÄÊúâÂ≠óÊÆµÈÉΩÊòØÂøÖÂ°´È°π„ÄÇ",
                donateButton: "ÊçêËµ†",
                donateTitle: "ÊîØÊåÅÈ°πÁõÆ",
                donateDescription: "ÊÇ®ÁöÑÊîØÊåÅÊúâÂä©‰∫é‰øùÊåÅÊ∏∏ÊàèËøêË°å„ÄÇË∞¢Ë∞¢ÔºÅ",
                donatePaymentTitle: "ÈÄâÊã©‰ªòÊ¨æÊñπÂºè",
                applePay: "‰ΩøÁî® Apple Pay ‰ªòÊ¨æ",
                cardPay: "‰ΩøÁî®Èì∂Ë°åÂç°‰ªòÊ¨æ",
                paymentInfo: "ËøôÊòØ‰∏Ä‰∏™ÊºîÁ§∫„ÄÇ‰∏ç‰ºöÂ§ÑÁêÜ‰ªª‰ΩïÂÆûÈôÖ‰ªòÊ¨æ„ÄÇ",
            },
            uk: { // Ukrainian
                mainTitle: "MIGAgames",
                totalWinsPrefix: "–í—Å—å–æ–≥–æ –ø–µ—Ä–µ–º–æ–≥:",
                rpsButton: "–ö–∞–º—ñ–Ω—å, –ù–æ–∂–∏—Ü—ñ, –ü–∞–ø—ñ—Ä",
                gtnButton: "–í–≥–∞–¥–∞–π —á–∏—Å–ª–æ",
                settingsButton: "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",
                botLabel: "–ë–û–¢ ü§ñ",
                playerLabel: "–ì–†–ê–í–ï–¶–¨ üßë",
                choicePrefix: "–í–∏–±—ñ—Ä:",
                win: "–ü–ï–†–ï–ú–û–ì–ê!",
                lose: "–ü–†–û–ì–†–ê–®!",
                draw: "–ù–Ü–ß–ò–Ø!",
                rock: "–ö–∞–º—ñ–Ω—å",
                paper: "–ü–∞–ø—ñ—Ä",
                scissors: "–ù–æ–∂–∏—Ü—ñ",
                gtnTitle: "–í–≥–∞–¥–∞–π —á–∏—Å–ª–æ",
                playAgain: "–ó—ñ–≥—Ä–∞—Ç–∏ –∑–Ω–æ–≤—É",
                settingsTitle: "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",
                languageButton: "–ú–æ–≤–∞",
                languageMenuTitle: "–í–∏–±—Ä–∞—Ç–∏ –º–æ–≤—É",
                themeButton: "–¢–µ–º–∞",
                themeMenuTitle: "–í–∏–±—Ä–∞—Ç–∏ —Ç–µ–º—É",
                buttonColorButton: "–ö–æ–ª—ñ—Ä –∫–Ω–æ–ø–æ–∫",
                buttonColorMenuTitle: "–í–∏–±—Ä–∞—Ç–∏ –∫–æ–ª—ñ—Ä –∫–Ω–æ–ø–æ–∫",
                login: "–£–≤—ñ–π—Ç–∏",
                register: "–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏",
                logout: "–í–∏–π—Ç–∏",
                welcome: "–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ",
                usernamePlaceholder: "–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
                passwordPlaceholder: "–ü–∞—Ä–æ–ª—å",
                loginError: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ –ø–∞—Ä–æ–ª—å.",
                registerError: "–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤–∂–µ –∑–∞–π–Ω—è—Ç–µ.",
                registerSuccess: "–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞! –ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å.",
                emailPlaceholder: "–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞",
                switchToLogin: "–í–∂–µ —î –∞–∫–∫–∞—É–Ω—Ç? –£–≤—ñ–π—Ç–∏",
                switchToRegister: "–ù–µ–º–∞—î –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è",
                allFieldsRequired: "–£—Å—ñ –ø–æ–ª—è –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ.",
                donateButton: "–ü–æ–∂–µ—Ä—Ç–≤—É–≤–∞—Ç–∏",
                donateTitle: "–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç",
                donateDescription: "–í–∞—à–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥–æ–ø–æ–º–∞–≥–∞—î —ñ–≥—Ä–∞–º —Ä–æ–∑–≤–∏–≤–∞—Ç–∏—Å—è. –î—è–∫—É—î–º–æ!",
                donatePaymentTitle: "–í–∏–±–µ—Ä—ñ—Ç—å —Å–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏",
                applePay: "–°–ø–ª–∞—Ç–∏—Ç–∏ —á–µ—Ä–µ–∑ Apple Pay",
                cardPay: "–°–ø–ª–∞—Ç–∏—Ç–∏ –±–∞–Ω–∫—ñ–≤—Å—å–∫–æ—é –∫–∞—Ä—Ç–∫–æ—é",
                paymentInfo: "–¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è. –°–ø—Ä–∞–≤–∂–Ω—ñ–π –ø–ª–∞—Ç—ñ–∂ –Ω–µ –±—É–¥–µ –æ–±—Ä–æ–±–ª–µ–Ω–æ.",
            },
            pt: { // Portuguese
                mainTitle: "MIGAgames",
                totalWinsPrefix: "Total de vit√≥rias:",
                rpsButton: "Pedra, Papel, Tesoura",
                gtnButton: "Adivinhe o n√∫mero",
                settingsButton: "Configura√ß√µes",
                botLabel: "BOT ü§ñ",
                playerLabel: "JOGADOR üßë",
                choicePrefix: "Escolha:",
                win: "VENCEU!",
                lose: "PERDEU!",
                draw: "EMPATE!",
                rock: "Pedra",
                paper: "Papel",
                scissors: "Tesoura",
                gtnTitle: "Adivinhe o n√∫mero",
                playAgain: "Jogar novamente",
                settingsTitle: "Configura√ß√µes",
                languageButton: "Idioma",
                languageMenuTitle: "Selecione o idioma",
                themeButton: "Tema",
                themeMenuTitle: "Selecione o tema",
                buttonColorButton: "Cor do bot√£o",
                buttonColorMenuTitle: "Selecione a cor do bot√£o",
                login: "Entrar",
                register: "Continuar",
                logout: "Sair",
                welcome: "Bem-vindo",
                usernamePlaceholder: "Nome de usu√°rio",
                passwordPlaceholder: "Senha",
                loginError: "Nome de usu√°rio ou senha inv√°lidos.",
                registerError: "Nome de usu√°rio j√° existe.",
                registerSuccess: "Registro bem-sucedido! Por favor, fa√ßa o login.",
                emailPlaceholder: "Email",
                switchToLogin: "J√° tem uma conta? Entrar",
                switchToRegister: "N√£o tem uma conta? Registrar",
                allFieldsRequired: "Todos os campos s√£o obrigat√≥rios.",
                donateButton: "Doar",
                donateTitle: "Apoie o Projeto",
                donateDescription: "Seu apoio ajuda a manter os jogos funcionando. Obrigado!",
                donatePaymentTitle: "Escolha a forma de pagamento",
                applePay: "Pagar com Apple Pay",
                cardPay: "Pagar com cart√£o banc√°rio",
                paymentInfo: "Isto √© uma demonstra√ß√£o. Nenhum pagamento real ser√° processado.",
            },
        };

        const choices = ['Rock', 'Paper', 'Scissors'];

        function closeAllMenus() {
            rpsMenu.style.display = 'none';
            gtnMenu.style.display = 'none';
            settingsMenu.style.display = 'none';
            donateMenu.style.display = 'none';
            buttonColorSubmenu.style.display = 'none';
            themeSubmenu.style.display = 'none';
        }
        
        function applyLanguage(lang) {
            currentLanguage = lang;
            const t = translations[lang];

            // Main page elements
            document.getElementById('main-title').textContent = t.mainTitle;
            document.getElementById('rps-button').textContent = t.rpsButton;
            document.getElementById('gtn-button').textContent = t.gtnButton;
            document.getElementById('donate-button').textContent = t.donateButton;
            document.getElementById('settings-button').textContent = t.settingsButton; // This line was missing a semicolon in the previous context, but it's not the cause of the issue. The main issue is the initial HTML content.

            // RPS Menu elements
            botLabel.textContent = t.botLabel;
            playerLabel.textContent = t.playerLabel;
            rockBtn.textContent = t.rock;
            paperBtn.textContent = t.paper;
            scissorsBtn.textContent = t.scissors;

            // GTN Menu elements
            gtnTitle.textContent = t.gtnTitle;
            playAgainBtn.textContent = t.playAgain;

            // Settings Menu elements
            settingsTitle.textContent = t.settingsTitle;
            languageMenuBtn.textContent = t.languageButton;
            languageMenuTitle.textContent = t.languageMenuTitle;
            themeMenuBtn.textContent = t.themeButton;
            themeMenuTitle.textContent = t.themeMenuTitle;
            buttonColorMenuBtn.textContent = t.buttonColorButton;
            buttonColorMenuTitle.textContent = t.buttonColorMenuTitle;

            // Donate Menu
            document.getElementById('donate-title').textContent = t.donateTitle;
            document.getElementById('donate-description').textContent = t.donateDescription;
            document.getElementById('donate-payment-title').textContent = t.donatePaymentTitle;
            document.getElementById('apple-pay-btn').textContent = t.applePay;
            document.getElementById('card-pay-btn').textContent = t.cardPay;
            document.getElementById('payment-info').textContent = t.paymentInfo;
            
            // Auth UI
            updateAuthUI();

            // Translate open menus

            updateTotalWinsDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç–∞ —Å –Ω–æ–≤—ã–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
        }

        function updateTotalWinsDisplay() {
            document.getElementById('total-wins-display').textContent = `${translations[currentLanguage].totalWinsPrefix} ${totalWins}`; // This line was also missing a semicolon.
        }



        // Add a click event listener to the button
        rpsButton.addEventListener('click', function() {
            closeAllMenus(); // –°–Ω–∞—á–∞–ª–∞ –∑–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –º–µ–Ω—é
            // When the button is clicked, show the menu
            rpsMenu.style.display = 'block';

        });

        // Add a click event listener to the back button
        rpsBackButton.addEventListener('click', function() {
            // When the back button is clicked, hide the menu
            rpsMenu.style.display = 'none';
        });

        // Add a click event listener to the GTN button
        gtnButton.addEventListener('click', function() {
            closeAllMenus();
            startGtnGame();
            gtnMenu.style.display = 'block';
        });

        // Add a click event listener to the GTN back button
        gtnBackButton.addEventListener('click', function() {
            gtnMenu.style.display = 'none';
        });

        // Add a click event listener to the Settings button
        settingsButton.addEventListener('click', function() {
            closeAllMenus();
            settingsMainContent.style.display = 'block';
            languageSubmenu.style.display = 'none';
            themeSubmenu.style.display = 'none';
            languageSubmenu.style.display = 'none';
            settingsMenu.style.display = 'block';
        });

        // Add a click event listener to the Settings back button
        settingsBackButton.addEventListener('click', function() {
            settingsMenu.style.display = 'none';
        });

        // Add a click event listener to the Donate button
        donateButton.addEventListener('click', function() {
            closeAllMenus();
            donateAmountSelection.style.display = 'block';
            donatePaymentSelection.style.display = 'none';
            donateMenu.style.display = 'block';
        });

        donateBackBtn.addEventListener('click', function() {
            donateMenu.style.display = 'none';
        });

        // Game logic
        function playGame(playerChoice) {
            // Bot makes a random choice
            const botChoice = choices[Math.floor(Math.random() * choices.length)]; // Choices are still in English for internal logic
            botChoiceText.textContent = `${translations[currentLanguage].choicePrefix} ${translations[currentLanguage][botChoice.toLowerCase()]}`;

            // Determine the winner
            if (playerChoice === botChoice) {
                resultText.textContent = translations[currentLanguage].draw;
                resultText.style.color = 'gray';
            } else if (
                (playerChoice === 'Rock' && botChoice === 'Scissors') ||
                (playerChoice === 'Paper' && botChoice === 'Rock') ||
                (playerChoice === 'Scissors' && botChoice === 'Paper')
            ) {
                resultText.textContent = translations[currentLanguage].win;
                resultText.style.color = 'green';
                totalWins++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ–±—â–∏–π —Å—á–µ—Ç—á–∏–∫ –ø–æ–±–µ–¥
            } else {
                resultText.textContent = translations[currentLanguage].lose;
                resultText.style.color = 'red';
            }

            // –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ 6 —Å–µ–∫—É–Ω–¥ (6000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥)
            setTimeout(function() {
                resultText.textContent = '';
                botChoiceText.textContent = `${translations[currentLanguage].choicePrefix} ?`;
                updateTotalWinsDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç–∞ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞
            }, 6000);
        }

        // Add event listeners to player's choice buttons
        rockBtn.addEventListener('click', function() {
            playGame('Rock');
        });
        paperBtn.addEventListener('click', function() {
            playGame('Paper');
        });
        scissorsBtn.addEventListener('click', function() {
            playGame('Scissors');
        });

        // --- Guess The Number Logic ---

        function startGtnGame() {
            // 1. Reset state
            gtnResultText.textContent = '';
            playAgainBtn.style.display = 'none';
            gtnChoicesContainer.style.display = 'block';
            gtnChoicesContainer.innerHTML = ''; // Clear old buttons

            // 2. Start spinning
            if (diceSpinInterval) clearInterval(diceSpinInterval); // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
            diceIcon.classList.add('spinning');
            diceSpinInterval = setInterval(() => {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –≥—Ä–∞–Ω—å –∫–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 100–º—Å
                const randomFace = diceFaces[Math.floor(Math.random() * diceFaces.length)];
                diceIcon.textContent = randomFace;
            }, 100);

            // 3. Create number buttons
            for (let i = 1; i <= 6; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.addEventListener('click', () => handleGtnChoice(i));
                gtnChoicesContainer.appendChild(button);
            }
        }

        function handleGtnChoice(playerGuess) {
            // 1. Stop spinning
            clearInterval(diceSpinInterval); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–º–µ–Ω—É —Ü–∏—Ñ—Ä
            diceIcon.classList.remove('spinning'); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS-–≤—Ä–∞—â–µ–Ω–∏–µ

            // 2. Get random dice result (number from 1 to 6)
            const diceResult = Math.floor(Math.random() * 6) + 1;

            // 3. Update dice icon to show result
            diceIcon.textContent = diceFaces[diceResult - 1];

            // 4. Check for win/loss
            if (playerGuess === diceResult) {
                gtnResultText.textContent = translations[currentLanguage].win;
                gtnResultText.style.color = 'green';
                totalWins++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ–±—â–∏–π —Å—á–µ—Ç—á–∏–∫ –ø–æ–±–µ–¥
            } else {
                gtnResultText.textContent = translations[currentLanguage].lose;
                gtnResultText.style.color = 'red';
            }

            // 5. Hide choice buttons and show "Play again" button
            gtnChoicesContainer.style.display = 'none';
            playAgainBtn.style.display = 'inline-block';
            updateTotalWinsDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç–∞
        }

        // Event listener for "Play again" button
        playAgainBtn.addEventListener('click', startGtnGame);

        // --- Settings Logic ---
        languageMenuBtn.addEventListener('click', () => {
            settingsMainContent.style.display = 'none';
            languageSubmenu.style.display = 'block';
        });

        languageSubmenuBackBtn.addEventListener('click', () => {
            languageSubmenu.style.display = 'none';
            settingsMainContent.style.display = 'block';
        });

        themeMenuBtn.addEventListener('click', () => {
            settingsMainContent.style.display = 'none';
            themeSubmenu.style.display = 'block';
        });

        themeSubmenuBackBtn.addEventListener('click', () => {
            themeSubmenu.style.display = 'none';
            settingsMainContent.style.display = 'block';
        });

        buttonColorMenuBtn.addEventListener('click', () => {
            settingsMainContent.style.display = 'none';
            buttonColorSubmenu.style.display = 'block';
        });

        buttonColorSubmenuBackBtn.addEventListener('click', () => {
            buttonColorSubmenu.style.display = 'none';
            settingsMainContent.style.display = 'block';
        });

        function createThemeButtons() {
            const themeContainer = document.getElementById('theme-buttons-container');
            const themes = {
                'Red': 'red',
                'Yellow': 'yellow',
                'Green': 'green',
                'Orange': 'orange',
                'Purple': 'purple',
                'White': 'white'
            };

            Object.keys(themes).forEach(themeName => {
                const button = document.createElement('button');
                button.textContent = themeName;
                button.style.backgroundColor = themes[themeName];
                if (themeName === 'White' || themeName === 'Yellow') {
                    button.style.color = 'black'; // Make text visible on light backgrounds
                } else {
                    button.style.color = 'white'; // Make text visible on dark backgrounds
                }
                button.addEventListener('click', () => {
                    document.body.style.backgroundColor = themes[themeName];
                });
                themeContainer.appendChild(button);
            });
        }

        function createButtonColorButtons() {
            const container = document.getElementById('button-color-buttons-container');
            const colors = {
                'Black': 'black',
                'Pink': 'hotpink',
                'Dark Blue': 'darkblue'
            };

            Object.keys(colors).forEach(colorName => {
                const button = document.createElement('button');
                button.textContent = colorName;
                button.style.backgroundColor = colors[colorName];
                button.style.color = 'white'; // Default to white text

                button.addEventListener('click', () => {
                    const allButtons = document.querySelectorAll('button');
                    allButtons.forEach(btn => {
                        // We don't want to change the style of the back buttons or theme buttons
                        if (!btn.classList.contains('back-button') && !btn.parentElement.id.includes('theme-buttons') && !btn.parentElement.id.includes('button-color-buttons')) {
                            btn.style.backgroundColor = colors[colorName];
                            btn.style.color = 'white'; // Keep text white for all these colors
                        }
                    });
                });
                container.appendChild(button);
            });
        }

        function createLanguageButtons() {
            const langContainer = document.getElementById('language-submenu');
            const langCodes = { 'English': 'en', '–†—É—Å—Å–∫–∏–π': 'ru', 'Espa√±ol': 'es', 'Deutsch': 'de', 'Suomi': 'fi', '‰∏≠Êñá': 'zh', '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞': 'uk', 'Portugu√™s': 'pt' };
            
            Object.keys(langCodes).forEach(langName => {
                const button = document.createElement('button');
                button.textContent = langName;
                button.addEventListener('click', () => {
                    applyLanguage(langCodes[langName]);
                });
                langContainer.appendChild(button);
            });
        }

        function createBackgroundEmojis() {
            const emojiContainer = document.getElementById('emoji-background');
            if (!emojiContainer) return;
            const emojis = ['‚úÇÔ∏è', 'üóø', 'üé∞', 'üé≤', '‚öôÔ∏è'];
            const numberOfEmojis = 50;

            for (let i = 0; i < numberOfEmojis; i++) {
                const emojiSpan = document.createElement('span');
                
                emojiSpan.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emojiSpan.style.left = Math.random() * 100 + 'vw';
                emojiSpan.style.top = Math.random() * 100 + 'vh';
                emojiSpan.style.fontSize = (Math.random() * 2.5 + 1) + 'em'; // –æ—Ç 1em –¥–æ 3.5em
                emojiSpan.style.opacity = Math.random() * 0.4 + 0.1; // –æ—Ç 0.1 –¥–æ 0.5
                emojiSpan.style.animationDelay = Math.random() * 10 + 's';
                emojiSpan.style.animationDuration = (Math.random() * 10 + 8) + 's'; // –æ—Ç 8 –¥–æ 18 —Å–µ–∫—É–Ω–¥

                emojiContainer.appendChild(emojiSpan);
            }
        }

        // --- AUTH LOGIC ---
        function updateAuthUI() {
            const currentUser = localStorage.getItem('currentUser');
            authContainer.innerHTML = ''; // Clear previous state
            
            if (currentUser) {
                // Logged in state
                document.getElementById('main-content').style.display = 'block';
                document.getElementById('welcome-overlay').style.display = 'none';
                const t = translations[currentLanguage];
                const welcomeText = document.createElement('span');
                welcomeText.textContent = `${t.welcome}, ${currentUser}! `;
                welcomeText.style.color = document.body.style.backgroundColor === 'white' ? 'black' : 'white';

                const logoutBtn = document.createElement('button');
                logoutBtn.id = 'logout-btn';
                logoutBtn.textContent = t.logout;
                logoutBtn.addEventListener('click', handleLogout);

                authContainer.appendChild(welcomeText);
                authContainer.appendChild(logoutBtn);
            } else {
                // Logged out state
                document.getElementById('main-content').style.display = 'none';
                document.getElementById('welcome-overlay').style.display = 'flex';
            }
        }

        function handleLogout() {
            saveUserWins(); // Save wins before logging out
            localStorage.removeItem('currentUser');
            totalWins = 0; // Reset wins for logged-out state
            updateAuthUI();
            updateTotalWinsDisplay();
        }

        function handleLogin(e) {
            const username = document.getElementById('welcome-login-username').value;
            const password = document.getElementById('welcome-login-password').value;
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            const user = users.find(u => u.username === username && u.password === password);

            if (user) {
                localStorage.setItem('currentUser', user.username);
                totalWins = user.wins || 0;
                updateAuthUI();
                updateTotalWinsDisplay();
            } else {
                document.getElementById('welcome-login-error').textContent = translations[currentLanguage].loginError;
            }
        }

        function handleRegister(e) {
            const username = document.getElementById('welcome-register-username').value;
            const password = document.getElementById('welcome-register-password').value;
            const email = document.getElementById('welcome-register-email').value;
            let users = JSON.parse(localStorage.getItem('users')) || [];

            if (!username || !password || !email) {
                document.getElementById('welcome-register-error').textContent = translations[currentLanguage].allFieldsRequired;
                return;
            }

            if (users.some(u => u.username === username)) {
                document.getElementById('welcome-register-error').textContent = translations[currentLanguage].registerError;
            } else {
                users.push({ username, password, email, wins: 0 });
                localStorage.setItem('users', JSON.stringify(users));
                
                const errorP = document.getElementById('welcome-register-error');
                errorP.textContent = translations[currentLanguage].registerSuccess;
                errorP.style.color = 'green';

                setTimeout(() => {
                    localStorage.setItem('currentUser', username);
                    totalWins = 0;
                    updateAuthUI();
                    updateTotalWinsDisplay();
                }, 1500);
            }
        }

        function saveUserWins() {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                let users = JSON.parse(localStorage.getItem('users')) || [];
                const userIndex = users.findIndex(u => u.username === currentUser);
                if (userIndex !== -1) {
                    users[userIndex].wins = totalWins;
                    localStorage.setItem('users', JSON.stringify(users));
                }
            }
        }

        function showRegisterForm() {
            const container = document.querySelector('.auth-form-container');
            const template = document.getElementById('welcome-register-form-template');
            container.innerHTML = template.innerHTML;
            translateRegisterForm(translations[currentLanguage]);
            document.getElementById('welcome-register-submit').addEventListener('click', handleRegister);
            document.getElementById('switch-to-login').addEventListener('click', showLoginForm);
        }

        function showLoginForm() {
            const container = document.querySelector('.auth-form-container');
            const template = document.getElementById('welcome-login-form-template');
            container.innerHTML = template.innerHTML;
            translateLoginForm(translations[currentLanguage]);
            document.getElementById('welcome-login-submit').addEventListener('click', handleLogin);
            document.getElementById('switch-to-register').addEventListener('click', showRegisterForm);
        }

        function translateRegisterForm(t) {
            document.getElementById('welcome-register-title').textContent = t.register;
            document.getElementById('welcome-register-username').placeholder = t.usernamePlaceholder;
            document.getElementById('welcome-register-email').placeholder = t.emailPlaceholder;
            document.getElementById('welcome-register-password').placeholder = t.passwordPlaceholder;
            document.getElementById('welcome-register-submit').textContent = t.register;
            document.getElementById('switch-to-login').textContent = t.switchToLogin;
        }

        function translateLoginForm(t) {
            document.getElementById('welcome-login-title').textContent = t.login;
            document.getElementById('welcome-login-username').placeholder = t.usernamePlaceholder;
            document.getElementById('welcome-login-password').placeholder = t.passwordPlaceholder;
            document.getElementById('welcome-login-submit').textContent = t.login;
            document.getElementById('switch-to-register').textContent = t.switchToRegister;
        }
        
        window.addEventListener('beforeunload', saveUserWins);

        // Initial language application
        function initialize() {
            createLanguageButtons();
            createButtonColorButtons();
            createThemeButtons();
            createBackgroundEmojis();
            if (!localStorage.getItem('currentUser')) {
                showRegisterForm();
            }
            applyLanguage(currentLanguage);
            updateAuthUI();
            updateTotalWinsDisplay();
        }

        initialize();


    </script>
</body>
</html>